{"ast":null,"code":"import { toHex } from \"@mysten/bcs\";\nimport { blake2b } from \"@noble/hashes/blake2b\";\nimport { bcs } from \"../bcs/index.js\";\nfunction deriveDynamicFieldID(parentId, typeTag, key) {\n  const address = bcs.Address.serialize(parentId).toBytes();\n  const tag = bcs.TypeTag.serialize(typeTag).toBytes();\n  const keyLength = bcs.u64().serialize(key.length).toBytes();\n  const hash = blake2b.create({\n    dkLen: 32\n  });\n  hash.update(new Uint8Array([240]));\n  hash.update(address);\n  hash.update(keyLength);\n  hash.update(key);\n  hash.update(tag);\n  return `0x${toHex(hash.digest().slice(0, 32))}`;\n}\nexport { deriveDynamicFieldID };","map":{"version":3,"names":["toHex","blake2b","bcs","deriveDynamicFieldID","parentId","typeTag","key","address","Address","serialize","toBytes","tag","TypeTag","keyLength","u64","length","hash","create","dkLen","update","Uint8Array","digest","slice"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\r\\sui-workshop\\node_modules\\@mysten\\sui\\src\\utils\\dynamic-fields.ts"],"sourcesContent":["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { toHex } from '@mysten/bcs';\nimport { blake2b } from '@noble/hashes/blake2b';\n\nimport type { TypeTag } from '../bcs/bcs.js';\nimport { bcs } from '../bcs/index.js';\n\nexport function deriveDynamicFieldID(\n\tparentId: string,\n\ttypeTag: typeof TypeTag.$inferInput,\n\tkey: Uint8Array,\n) {\n\tconst address = bcs.Address.serialize(parentId).toBytes();\n\tconst tag = bcs.TypeTag.serialize(typeTag).toBytes();\n\tconst keyLength = bcs.u64().serialize(key.length).toBytes();\n\n\tconst hash = blake2b.create({\n\t\tdkLen: 32,\n\t});\n\n\thash.update(new Uint8Array([0xf0]));\n\thash.update(address);\n\thash.update(keyLength);\n\thash.update(key);\n\thash.update(tag);\n\n\treturn `0x${toHex(hash.digest().slice(0, 32))}`;\n}\n"],"mappings":"AAGA,SAASA,KAAA,QAAa;AACtB,SAASC,OAAA,QAAe;AAGxB,SAASC,GAAA,QAAW;AAEb,SAASC,qBACfC,QAAA,EACAC,OAAA,EACAC,GAAA,EACC;EACD,MAAMC,OAAA,GAAUL,GAAA,CAAIM,OAAA,CAAQC,SAAA,CAAUL,QAAQ,EAAEM,OAAA,CAAQ;EACxD,MAAMC,GAAA,GAAMT,GAAA,CAAIU,OAAA,CAAQH,SAAA,CAAUJ,OAAO,EAAEK,OAAA,CAAQ;EACnD,MAAMG,SAAA,GAAYX,GAAA,CAAIY,GAAA,CAAI,EAAEL,SAAA,CAAUH,GAAA,CAAIS,MAAM,EAAEL,OAAA,CAAQ;EAE1D,MAAMM,IAAA,GAAOf,OAAA,CAAQgB,MAAA,CAAO;IAC3BC,KAAA,EAAO;EACR,CAAC;EAEDF,IAAA,CAAKG,MAAA,CAAO,IAAIC,UAAA,CAAW,CAAC,GAAI,CAAC,CAAC;EAClCJ,IAAA,CAAKG,MAAA,CAAOZ,OAAO;EACnBS,IAAA,CAAKG,MAAA,CAAON,SAAS;EACrBG,IAAA,CAAKG,MAAA,CAAOb,GAAG;EACfU,IAAA,CAAKG,MAAA,CAAOR,GAAG;EAEf,OAAO,KAAKX,KAAA,CAAMgB,IAAA,CAAKK,MAAA,CAAO,EAAEC,KAAA,CAAM,GAAG,EAAE,CAAC,CAAC;AAC9C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}