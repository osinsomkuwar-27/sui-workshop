{"ast":null,"code":"/*! @license MediaQueryParser - MIT License - Tom Golden (github@tbjgolden.com) */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nvar weirdNewlines = /(\\u000D|\\u000C|\\u000D\\u000A)/g;\nvar nullOrSurrogates = /[\\u0000\\uD800-\\uDFFF]/g;\nvar commentRegex = /(\\/\\*)[\\s\\S]*?(\\*\\/)/g;\nvar lexicalAnalysis = function lexicalAnalysis(str, index) {\n  if (index === void 0) {\n    index = 0;\n  }\n  str = str.replace(weirdNewlines, '\\n').replace(nullOrSurrogates, \"\\uFFFD\");\n  str = str.replace(commentRegex, '');\n  var tokens = [];\n  for (; index < str.length; index += 1) {\n    var code = str.charCodeAt(index);\n    if (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n      var code_1 = str.charCodeAt(++index);\n      while (code_1 === 0x0009 || code_1 === 0x0020 || code_1 === 0x000a) {\n        code_1 = str.charCodeAt(++index);\n      }\n      index -= 1;\n      tokens.push({\n        type: '<whitespace-token>'\n      });\n    } else if (code === 0x0022) {\n      var result = consumeString(str, index);\n      if (result === null) {\n        return null;\n      }\n      var _a = __read(result, 2),\n        lastIndex = _a[0],\n        value = _a[1];\n      tokens.push({\n        type: '<string-token>',\n        value: value\n      });\n      index = lastIndex;\n    } else if (code === 0x0023) {\n      if (index + 1 < str.length) {\n        var nextCode = str.charCodeAt(index + 1);\n        if (nextCode === 0x005f || nextCode >= 0x0041 && nextCode <= 0x005a || nextCode >= 0x0061 && nextCode <= 0x007a || nextCode >= 0x0080 || nextCode >= 0x0030 && nextCode <= 0x0039 || nextCode === 0x005c && index + 2 < str.length && str.charCodeAt(index + 2) !== 0x000a) {\n          var flag = wouldStartIdentifier(str, index + 1) ? 'id' : 'unrestricted';\n          var result = consumeIdentUnsafe(str, index + 1);\n          if (result !== null) {\n            var _b = __read(result, 2),\n              lastIndex = _b[0],\n              value = _b[1];\n            tokens.push({\n              type: '<hash-token>',\n              value: value.toLowerCase(),\n              flag: flag\n            });\n            index = lastIndex;\n            continue;\n          }\n        }\n      }\n      tokens.push({\n        type: '<delim-token>',\n        value: code\n      });\n    } else if (code === 0x0027) {\n      var result = consumeString(str, index);\n      if (result === null) {\n        return null;\n      }\n      var _c = __read(result, 2),\n        lastIndex = _c[0],\n        value = _c[1];\n      tokens.push({\n        type: '<string-token>',\n        value: value\n      });\n      index = lastIndex;\n    } else if (code === 0x0028) {\n      tokens.push({\n        type: '<(-token>'\n      });\n    } else if (code === 0x0029) {\n      tokens.push({\n        type: '<)-token>'\n      });\n    } else if (code === 0x002b) {\n      var plusNumeric = consumeNumeric(str, index);\n      if (plusNumeric === null) {\n        tokens.push({\n          type: '<delim-token>',\n          value: code\n        });\n      } else {\n        var _d = __read(plusNumeric, 2),\n          lastIndex = _d[0],\n          tokenTuple = _d[1];\n        if (tokenTuple[0] === '<dimension-token>') {\n          tokens.push({\n            type: '<dimension-token>',\n            value: tokenTuple[1],\n            unit: tokenTuple[2].toLowerCase(),\n            flag: 'number'\n          });\n        } else if (tokenTuple[0] === '<number-token>') {\n          tokens.push({\n            type: tokenTuple[0],\n            value: tokenTuple[1],\n            flag: tokenTuple[2]\n          });\n        } else {\n          tokens.push({\n            type: tokenTuple[0],\n            value: tokenTuple[1],\n            flag: 'number'\n          });\n        }\n        index = lastIndex;\n      }\n    } else if (code === 0x002c) {\n      tokens.push({\n        type: '<comma-token>'\n      });\n    } else if (code === 0x002d) {\n      var minusNumeric = consumeNumeric(str, index);\n      if (minusNumeric !== null) {\n        var _e = __read(minusNumeric, 2),\n          lastIndex = _e[0],\n          tokenTuple = _e[1];\n        if (tokenTuple[0] === '<dimension-token>') {\n          tokens.push({\n            type: '<dimension-token>',\n            value: tokenTuple[1],\n            unit: tokenTuple[2].toLowerCase(),\n            flag: 'number'\n          });\n        } else if (tokenTuple[0] === '<number-token>') {\n          tokens.push({\n            type: tokenTuple[0],\n            value: tokenTuple[1],\n            flag: tokenTuple[2]\n          });\n        } else {\n          tokens.push({\n            type: tokenTuple[0],\n            value: tokenTuple[1],\n            flag: 'number'\n          });\n        }\n        index = lastIndex;\n        continue;\n      }\n      if (index + 2 < str.length) {\n        var nextCode = str.charCodeAt(index + 1);\n        var nextNextCode = str.charCodeAt(index + 2);\n        if (nextCode === 0x002d && nextNextCode === 0x003e) {\n          tokens.push({\n            type: '<CDC-token>'\n          });\n          index += 2;\n          continue;\n        }\n      }\n      var result = consumeIdentLike(str, index);\n      if (result !== null) {\n        var _f = __read(result, 3),\n          lastIndex = _f[0],\n          value = _f[1],\n          type = _f[2];\n        tokens.push({\n          type: type,\n          value: value\n        });\n        index = lastIndex;\n        continue;\n      }\n      tokens.push({\n        type: '<delim-token>',\n        value: code\n      });\n    } else if (code === 0x002e) {\n      var minusNumeric = consumeNumeric(str, index);\n      if (minusNumeric === null) {\n        tokens.push({\n          type: '<delim-token>',\n          value: code\n        });\n      } else {\n        var _g = __read(minusNumeric, 2),\n          lastIndex = _g[0],\n          tokenTuple = _g[1];\n        if (tokenTuple[0] === '<dimension-token>') {\n          tokens.push({\n            type: '<dimension-token>',\n            value: tokenTuple[1],\n            unit: tokenTuple[2].toLowerCase(),\n            flag: 'number'\n          });\n        } else if (tokenTuple[0] === '<number-token>') {\n          tokens.push({\n            type: tokenTuple[0],\n            value: tokenTuple[1],\n            flag: tokenTuple[2]\n          });\n        } else {\n          tokens.push({\n            type: tokenTuple[0],\n            value: tokenTuple[1],\n            flag: 'number'\n          });\n        }\n        index = lastIndex;\n        continue;\n      }\n    } else if (code === 0x003a) {\n      tokens.push({\n        type: '<colon-token>'\n      });\n    } else if (code === 0x003b) {\n      tokens.push({\n        type: '<semicolon-token>'\n      });\n    } else if (code === 0x003c) {\n      if (index + 3 < str.length) {\n        var nextCode = str.charCodeAt(index + 1);\n        var nextNextCode = str.charCodeAt(index + 2);\n        var nextNextNextCode = str.charCodeAt(index + 3);\n        if (nextCode === 0x0021 && nextNextCode === 0x002d && nextNextNextCode === 0x002d) {\n          tokens.push({\n            type: '<CDO-token>'\n          });\n          index += 3;\n          continue;\n        }\n      }\n      tokens.push({\n        type: '<delim-token>',\n        value: code\n      });\n    } else if (code === 0x0040) {\n      var result = consumeIdent(str, index + 1);\n      if (result !== null) {\n        var _h = __read(result, 2),\n          lastIndex = _h[0],\n          value = _h[1];\n        tokens.push({\n          type: '<at-keyword-token>',\n          value: value.toLowerCase()\n        });\n        index = lastIndex;\n        continue;\n      }\n      tokens.push({\n        type: '<delim-token>',\n        value: code\n      });\n    } else if (code === 0x005b) {\n      tokens.push({\n        type: '<[-token>'\n      });\n    } else if (code === 0x005c) {\n      var result = consumeEscape(str, index);\n      if (result === null) {\n        return null;\n      }\n      var _j = __read(result, 2),\n        lastIndex = _j[0],\n        value = _j[1];\n      str = str.slice(0, index) + value + str.slice(lastIndex + 1);\n      index -= 1;\n    } else if (code === 0x005d) {\n      tokens.push({\n        type: '<]-token>'\n      });\n    } else if (code === 0x007b) {\n      tokens.push({\n        type: '<{-token>'\n      });\n    } else if (code === 0x007d) {\n      tokens.push({\n        type: '<}-token>'\n      });\n    } else if (code >= 0x0030 && code <= 0x0039) {\n      var result = consumeNumeric(str, index);\n      var _k = __read(result, 2),\n        lastIndex = _k[0],\n        tokenTuple = _k[1];\n      if (tokenTuple[0] === '<dimension-token>') {\n        tokens.push({\n          type: '<dimension-token>',\n          value: tokenTuple[1],\n          unit: tokenTuple[2].toLowerCase(),\n          flag: 'number'\n        });\n      } else if (tokenTuple[0] === '<number-token>') {\n        tokens.push({\n          type: tokenTuple[0],\n          value: tokenTuple[1],\n          flag: tokenTuple[2]\n        });\n      } else {\n        tokens.push({\n          type: tokenTuple[0],\n          value: tokenTuple[1],\n          flag: 'number'\n        });\n      }\n      index = lastIndex;\n    } else if (code === 0x005f || code >= 0x0041 && code <= 0x005a || code >= 0x0061 && code <= 0x007a || code >= 0x0080) {\n      var result = consumeIdentLike(str, index);\n      if (result === null) {\n        return null;\n      }\n      var _l = __read(result, 3),\n        lastIndex = _l[0],\n        value = _l[1],\n        type = _l[2];\n      tokens.push({\n        type: type,\n        value: value\n      });\n      index = lastIndex;\n    } else {\n      tokens.push({\n        type: '<delim-token>',\n        value: code\n      });\n    }\n  }\n  tokens.push({\n    type: '<EOF-token>'\n  });\n  return tokens;\n};\nvar consumeString = function consumeString(str, index) {\n  if (str.length <= index + 1) return null;\n  var firstCode = str.charCodeAt(index);\n  var charCodes = [];\n  for (var i = index + 1; i < str.length; i += 1) {\n    var code = str.charCodeAt(i);\n    if (code === firstCode) {\n      return [i, String.fromCharCode.apply(null, charCodes)];\n    } else if (code === 0x005c) {\n      var result = consumeEscape(str, i);\n      if (result === null) return null;\n      var _a = __read(result, 2),\n        lastIndex = _a[0],\n        charCode = _a[1];\n      charCodes.push(charCode);\n      i = lastIndex;\n    } else if (code === 0x000a) {\n      return null;\n    } else {\n      charCodes.push(code);\n    }\n  }\n  return null;\n};\nvar wouldStartIdentifier = function wouldStartIdentifier(str, index) {\n  if (str.length <= index) return false;\n  var code = str.charCodeAt(index);\n  if (code === 0x002d) {\n    if (str.length <= index + 1) return false;\n    var nextCode = str.charCodeAt(index + 1);\n    if (nextCode === 0x002d || nextCode === 0x005f || nextCode >= 0x0041 && nextCode <= 0x005a || nextCode >= 0x0061 && nextCode <= 0x007a || nextCode >= 0x0080) {\n      return true;\n    } else if (nextCode === 0x005c) {\n      if (str.length <= index + 2) return false;\n      var nextNextCode = str.charCodeAt(index + 2);\n      return nextNextCode !== 0x000a;\n    } else {\n      return false;\n    }\n  } else if (code === 0x005f || code >= 0x0041 && code <= 0x005a || code >= 0x0061 && code <= 0x007a || code >= 0x0080) {\n    return true;\n  } else if (code === 0x005c) {\n    if (str.length <= index + 1) return false;\n    var nextCode = str.charCodeAt(index + 1);\n    return nextCode !== 0x000a;\n  } else {\n    return false;\n  }\n};\nvar consumeEscape = function consumeEscape(str, index) {\n  if (str.length <= index + 1) return null;\n  if (str.charCodeAt(index) !== 0x005c) return null;\n  var code = str.charCodeAt(index + 1);\n  if (code === 0x000a) {\n    return null;\n  } else if (code >= 0x0030 && code <= 0x0039 || code >= 0x0041 && code <= 0x0046 || code >= 0x0061 && code <= 0x0066) {\n    var hexCharCodes = [code];\n    var min = Math.min(index + 7, str.length);\n    var i = index + 2;\n    for (; i < min; i += 1) {\n      var code_2 = str.charCodeAt(i);\n      if (code_2 >= 0x0030 && code_2 <= 0x0039 || code_2 >= 0x0041 && code_2 <= 0x0046 || code_2 >= 0x0061 && code_2 <= 0x0066) {\n        hexCharCodes.push(code_2);\n      } else {\n        break;\n      }\n    }\n    if (i < str.length) {\n      var code_3 = str.charCodeAt(i);\n      if (code_3 === 0x0009 || code_3 === 0x0020 || code_3 === 0x000a) {\n        i += 1;\n      }\n    }\n    return [i - 1, parseInt(String.fromCharCode.apply(null, hexCharCodes), 16)];\n  } else {\n    return [index + 1, code];\n  }\n};\nvar consumeNumeric = function consumeNumeric(str, index) {\n  var numberResult = consumeNumber(str, index);\n  if (numberResult === null) return null;\n  var _a = __read(numberResult, 3),\n    numberEndIndex = _a[0],\n    numberValue = _a[1],\n    numberFlag = _a[2];\n  var identResult = consumeIdent(str, numberEndIndex + 1);\n  if (identResult !== null) {\n    var _b = __read(identResult, 2),\n      identEndIndex = _b[0],\n      identValue = _b[1];\n    return [identEndIndex, ['<dimension-token>', numberValue, identValue]];\n  }\n  if (numberEndIndex + 1 < str.length && str.charCodeAt(numberEndIndex + 1) === 0x0025) {\n    return [numberEndIndex + 1, ['<percentage-token>', numberValue]];\n  }\n  return [numberEndIndex, ['<number-token>', numberValue, numberFlag]];\n};\nvar consumeNumber = function consumeNumber(str, index) {\n  if (str.length <= index) return null;\n  var flag = 'integer';\n  var numberChars = [];\n  var firstCode = str.charCodeAt(index);\n  if (firstCode === 0x002b || firstCode === 0x002d) {\n    index += 1;\n    if (firstCode === 0x002d) numberChars.push(0x002d);\n  }\n  while (index < str.length) {\n    var code = str.charCodeAt(index);\n    if (code >= 0x0030 && code <= 0x0039) {\n      numberChars.push(code);\n      index += 1;\n    } else {\n      break;\n    }\n  }\n  if (index + 1 < str.length) {\n    var nextCode = str.charCodeAt(index);\n    var nextNextCode = str.charCodeAt(index + 1);\n    if (nextCode === 0x002e && nextNextCode >= 0x0030 && nextNextCode <= 0x0039) {\n      numberChars.push(nextCode, nextNextCode);\n      flag = 'number';\n      index += 2;\n      while (index < str.length) {\n        var code = str.charCodeAt(index);\n        if (code >= 0x0030 && code <= 0x0039) {\n          numberChars.push(code);\n          index += 1;\n        } else {\n          break;\n        }\n      }\n    }\n  }\n  if (index + 1 < str.length) {\n    var nextCode = str.charCodeAt(index);\n    var nextNextCode = str.charCodeAt(index + 1);\n    var nextNextNextCode = str.charCodeAt(index + 2);\n    if (nextCode === 0x0045 || nextCode === 0x0065) {\n      var nextNextIsDigit = nextNextCode >= 0x0030 && nextNextCode <= 0x0039;\n      if (nextNextIsDigit || (nextNextCode === 0x002b || nextNextCode === 0x002d) && nextNextNextCode >= 0x0030 && nextNextNextCode <= 0x0039) {\n        flag = 'number';\n        if (nextNextIsDigit) {\n          numberChars.push(0x0045, nextNextCode);\n          index += 2;\n        } else if (nextNextCode === 0x002d) {\n          numberChars.push(0x0045, 0x002d, nextNextNextCode);\n          index += 3;\n        } else {\n          numberChars.push(0x0045, nextNextNextCode);\n          index += 3;\n        }\n        while (index < str.length) {\n          var code = str.charCodeAt(index);\n          if (code >= 0x0030 && code <= 0x0039) {\n            numberChars.push(code);\n            index += 1;\n          } else {\n            break;\n          }\n        }\n      }\n    }\n  }\n  var numberString = String.fromCharCode.apply(null, numberChars);\n  var value = flag === 'number' ? parseFloat(numberString) : parseInt(numberString);\n  if (value === -0) value = 0;\n  return Number.isNaN(value) ? null : [index - 1, value, flag];\n};\nvar consumeIdentUnsafe = function consumeIdentUnsafe(str, index) {\n  if (str.length <= index) {\n    return null;\n  }\n  var identChars = [];\n  for (var code = str.charCodeAt(index); index < str.length; code = str.charCodeAt(++index)) {\n    if (code === 0x002d || code === 0x005f || code >= 0x0041 && code <= 0x005a || code >= 0x0061 && code <= 0x007a || code >= 0x0080 || code >= 0x0030 && code <= 0x0039) {\n      identChars.push(code);\n      continue;\n    } else {\n      var result = consumeEscape(str, index);\n      if (result !== null) {\n        var _a = __read(result, 2),\n          lastIndex = _a[0],\n          code_4 = _a[1];\n        identChars.push(code_4);\n        index = lastIndex;\n        continue;\n      }\n    }\n    break;\n  }\n  return index === 0 ? null : [index - 1, String.fromCharCode.apply(null, identChars)];\n};\nvar consumeIdent = function consumeIdent(str, index) {\n  if (str.length <= index || !wouldStartIdentifier(str, index)) {\n    return null;\n  }\n  var identChars = [];\n  for (var code = str.charCodeAt(index); index < str.length; code = str.charCodeAt(++index)) {\n    if (code === 0x002d || code === 0x005f || code >= 0x0041 && code <= 0x005a || code >= 0x0061 && code <= 0x007a || code >= 0x0080 || code >= 0x0030 && code <= 0x0039) {\n      identChars.push(code);\n      continue;\n    } else {\n      var result = consumeEscape(str, index);\n      if (result !== null) {\n        var _a = __read(result, 2),\n          lastIndex = _a[0],\n          code_5 = _a[1];\n        identChars.push(code_5);\n        index = lastIndex;\n        continue;\n      }\n    }\n    break;\n  }\n  return [index - 1, String.fromCharCode.apply(null, identChars)];\n};\nvar consumeUrl = function consumeUrl(str, index) {\n  var code = str.charCodeAt(index);\n  while (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n    code = str.charCodeAt(++index);\n  }\n  var urlChars = [];\n  var hasFinishedWord = false;\n  while (index < str.length) {\n    if (code === 0x0029) {\n      return [index, String.fromCharCode.apply(null, urlChars)];\n    } else if (code === 0x0022 || code === 0x0027 || code === 0x0028) {\n      return null;\n    } else if (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n      if (!hasFinishedWord && urlChars.length !== 0) hasFinishedWord = true;\n    } else if (code === 0x005c) {\n      var result = consumeEscape(str, index);\n      if (result === null || hasFinishedWord) return null;\n      var _a = __read(result, 2),\n        lastIndex = _a[0],\n        value = _a[1];\n      urlChars.push(value);\n      index = lastIndex;\n    } else {\n      if (hasFinishedWord) return null;\n      urlChars.push(code);\n    }\n    code = str.charCodeAt(++index);\n  }\n  return null;\n};\nvar consumeIdentLike = function consumeIdentLike(str, index) {\n  var result = consumeIdent(str, index);\n  if (result === null) return null;\n  var _a = __read(result, 2),\n    lastIndex = _a[0],\n    value = _a[1];\n  if (value.toLowerCase() === 'url') {\n    if (str.length > lastIndex + 1) {\n      var nextCode = str.charCodeAt(lastIndex + 1);\n      if (nextCode === 0x0028) {\n        for (var offset = 2; lastIndex + offset < str.length; offset += 1) {\n          var nextNextCode = str.charCodeAt(lastIndex + offset);\n          if (nextNextCode === 0x0022 || nextNextCode === 0x0027) {\n            return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n          } else if (nextNextCode !== 0x0009 && nextNextCode !== 0x0020 && nextNextCode !== 0x000a) {\n            var result_1 = consumeUrl(str, lastIndex + offset);\n            if (result_1 === null) return null;\n            var _b = __read(result_1, 2),\n              lastUrlIndex = _b[0],\n              value_1 = _b[1];\n            return [lastUrlIndex, value_1, '<url-token>'];\n          }\n        }\n        return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n      }\n    }\n  } else if (str.length > lastIndex + 1) {\n    var nextCode = str.charCodeAt(lastIndex + 1);\n    if (nextCode === 0x0028) {\n      return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n    }\n  }\n  return [lastIndex, value.toLowerCase(), '<ident-token>'];\n};\nvar simplifyAST = function simplifyAST(ast) {\n  for (var i = ast.length - 1; i >= 0; i--) {\n    ast[i] = simplifyMediaQuery(ast[i]);\n  }\n  return ast;\n};\nvar simplifyMediaQuery = function simplifyMediaQuery(mediaQuery) {\n  if (mediaQuery.mediaCondition === null) return mediaQuery;\n  var mediaCondition = simplifyMediaCondition(mediaQuery.mediaCondition);\n  if (mediaCondition.operator === null && mediaCondition.children.length === 1 && 'children' in mediaCondition.children[0]) {\n    mediaCondition = mediaCondition.children[0];\n  }\n  return {\n    mediaPrefix: mediaQuery.mediaPrefix,\n    mediaType: mediaQuery.mediaType,\n    mediaCondition: mediaCondition\n  };\n};\nvar simplifyMediaCondition = function simplifyMediaCondition(mediaCondition) {\n  for (var i = mediaCondition.children.length - 1; i >= 0; i--) {\n    var unsimplifiedChild = mediaCondition.children[i];\n    if (!('context' in unsimplifiedChild)) {\n      var child = simplifyMediaCondition(unsimplifiedChild);\n      if (child.operator === null && child.children.length === 1) {\n        mediaCondition.children[i] = child.children[0];\n      } else if (child.operator === mediaCondition.operator && (child.operator === 'and' || child.operator === 'or')) {\n        var spliceArgs = [i, 1];\n        for (var i_1 = 0; i_1 < child.children.length; i_1++) {\n          spliceArgs.push(child.children[i_1]);\n        }\n        mediaCondition.children.splice.apply(mediaCondition.children, spliceArgs);\n      }\n    }\n  }\n  return mediaCondition;\n};\nvar createError = function createError(message, err) {\n  if (err instanceof Error) {\n    return new Error(\"\".concat(err.message.trim(), \"\\n\").concat(message.trim()));\n  } else {\n    return new Error(message.trim());\n  }\n};\nvar toAST = function toAST(str) {\n  return simplifyAST(toUnflattenedAST(str));\n};\nvar toUnflattenedAST = function toUnflattenedAST(str) {\n  var tokenList = lexicalAnalysis(str.trim());\n  if (tokenList === null) {\n    throw createError('Failed tokenizing');\n  }\n  var startIndex = 0;\n  var endIndex = tokenList.length - 1;\n  if (tokenList[0].type === '<at-keyword-token>' && tokenList[0].value === 'media') {\n    if (tokenList[1].type !== '<whitespace-token>') {\n      throw createError('Expected whitespace after media');\n    }\n    startIndex = 2;\n    for (var i = 2; i < tokenList.length - 1; i++) {\n      var token = tokenList[i];\n      if (token.type === '<{-token>') {\n        endIndex = i;\n        break;\n      } else if (token.type === '<semicolon-token>') {\n        throw createError(\"Expected '{' in media query but found ';'\");\n      }\n    }\n  }\n  tokenList = tokenList.slice(startIndex, endIndex);\n  return syntacticAnalysis(tokenList);\n};\nvar removeWhitespace = function removeWhitespace(tokenList) {\n  var newTokenList = [];\n  var before = false;\n  for (var i = 0; i < tokenList.length; i++) {\n    if (tokenList[i].type === '<whitespace-token>') {\n      before = true;\n      if (newTokenList.length > 0) {\n        newTokenList[newTokenList.length - 1].wsAfter = true;\n      }\n    } else {\n      newTokenList.push(__assign(__assign({}, tokenList[i]), {\n        wsBefore: before,\n        wsAfter: false\n      }));\n      before = false;\n    }\n  }\n  return newTokenList;\n};\nvar syntacticAnalysis = function syntacticAnalysis(tokenList) {\n  var e_1, _a;\n  var mediaQueryList = [[]];\n  for (var i = 0; i < tokenList.length; i++) {\n    var token = tokenList[i];\n    if (token.type === '<comma-token>') {\n      mediaQueryList.push([]);\n    } else {\n      mediaQueryList[mediaQueryList.length - 1].push(token);\n    }\n  }\n  var mediaQueries = mediaQueryList.map(removeWhitespace);\n  if (mediaQueries.length === 1 && mediaQueries[0].length === 0) {\n    return [{\n      mediaCondition: null,\n      mediaPrefix: null,\n      mediaType: 'all'\n    }];\n  } else {\n    var mediaQueryTokens = mediaQueries.map(function (mediaQueryTokens) {\n      if (mediaQueryTokens.length === 0) {\n        return null;\n      } else {\n        return tokenizeMediaQuery(mediaQueryTokens);\n      }\n    });\n    var nonNullMediaQueryTokens = [];\n    try {\n      for (var mediaQueryTokens_1 = __values(mediaQueryTokens), mediaQueryTokens_1_1 = mediaQueryTokens_1.next(); !mediaQueryTokens_1_1.done; mediaQueryTokens_1_1 = mediaQueryTokens_1.next()) {\n        var mediaQueryToken = mediaQueryTokens_1_1.value;\n        if (mediaQueryToken !== null) {\n          nonNullMediaQueryTokens.push(mediaQueryToken);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (mediaQueryTokens_1_1 && !mediaQueryTokens_1_1.done && (_a = mediaQueryTokens_1[\"return\"])) _a.call(mediaQueryTokens_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    if (nonNullMediaQueryTokens.length === 0) {\n      throw createError('No valid media queries');\n    }\n    return nonNullMediaQueryTokens;\n  }\n};\nvar tokenizeMediaQuery = function tokenizeMediaQuery(tokens) {\n  var firstToken = tokens[0];\n  if (firstToken.type === '<(-token>') {\n    try {\n      return {\n        mediaPrefix: null,\n        mediaType: 'all',\n        mediaCondition: tokenizeMediaCondition(tokens, true)\n      };\n    } catch (err) {\n      throw createError(\"Expected media condition after '('\", err);\n    }\n  } else if (firstToken.type === '<ident-token>') {\n    var mediaPrefix = null;\n    var mediaType = void 0;\n    var value = firstToken.value;\n    if (value === 'only' || value === 'not') {\n      mediaPrefix = value;\n    }\n    var firstIndex = mediaPrefix === null ? 0 : 1;\n    if (tokens.length <= firstIndex) {\n      throw createError(\"Expected extra token in media query\");\n    }\n    var firstNonUnaryToken = tokens[firstIndex];\n    if (firstNonUnaryToken.type === '<ident-token>') {\n      var value_1 = firstNonUnaryToken.value;\n      if (value_1 === 'all') {\n        mediaType = 'all';\n      } else if (value_1 === 'print' || value_1 === 'screen') {\n        mediaType = value_1;\n      } else if (value_1 === 'tty' || value_1 === 'tv' || value_1 === 'projection' || value_1 === 'handheld' || value_1 === 'braille' || value_1 === 'embossed' || value_1 === 'aural' || value_1 === 'speech') {\n        mediaPrefix = mediaPrefix === 'not' ? null : 'not';\n        mediaType = 'all';\n      } else {\n        throw createError(\"Unknown ident '\".concat(value_1, \"' in media query\"));\n      }\n    } else if (mediaPrefix === 'not' && firstNonUnaryToken.type === '<(-token>') {\n      var tokensWithParens = [{\n        type: '<(-token>',\n        wsBefore: false,\n        wsAfter: false\n      }];\n      tokensWithParens.push.apply(tokensWithParens, tokens);\n      tokensWithParens.push({\n        type: '<)-token>',\n        wsBefore: false,\n        wsAfter: false\n      });\n      try {\n        return {\n          mediaPrefix: null,\n          mediaType: 'all',\n          mediaCondition: tokenizeMediaCondition(tokensWithParens, true)\n        };\n      } catch (err) {\n        throw createError(\"Expected media condition after '('\", err);\n      }\n    } else {\n      throw createError('Invalid media query');\n    }\n    if (firstIndex + 1 === tokens.length) {\n      return {\n        mediaPrefix: mediaPrefix,\n        mediaType: mediaType,\n        mediaCondition: null\n      };\n    } else if (firstIndex + 4 < tokens.length) {\n      var secondNonUnaryToken = tokens[firstIndex + 1];\n      if (secondNonUnaryToken.type === '<ident-token>' && secondNonUnaryToken.value === 'and') {\n        try {\n          return {\n            mediaPrefix: mediaPrefix,\n            mediaType: mediaType,\n            mediaCondition: tokenizeMediaCondition(tokens.slice(firstIndex + 2), false)\n          };\n        } catch (err) {\n          throw createError(\"Expected media condition after 'and'\", err);\n        }\n      } else {\n        throw createError(\"Expected 'and' after media prefix\");\n      }\n    } else {\n      throw createError('Expected media condition after media prefix');\n    }\n  } else {\n    throw createError('Expected media condition or media prefix');\n  }\n};\nvar tokenizeMediaCondition = function tokenizeMediaCondition(tokens, mayContainOr, previousOperator) {\n  if (previousOperator === void 0) {\n    previousOperator = null;\n  }\n  if (tokens.length < 3 || tokens[0].type !== '<(-token>' || tokens[tokens.length - 1].type !== '<)-token>') {\n    throw new Error('Invalid media condition');\n  }\n  var endIndexOfFirstFeature = tokens.length - 1;\n  var maxDepth = 0;\n  var count = 0;\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n    if (token.type === '<(-token>') {\n      count += 1;\n      maxDepth = Math.max(maxDepth, count);\n    } else if (token.type === '<)-token>') {\n      count -= 1;\n    }\n    if (count === 0) {\n      endIndexOfFirstFeature = i;\n      break;\n    }\n  }\n  if (count !== 0) {\n    throw new Error('Mismatched parens\\nInvalid media condition');\n  }\n  var child;\n  var featureTokens = tokens.slice(0, endIndexOfFirstFeature + 1);\n  if (maxDepth === 1) {\n    child = tokenizeMediaFeature(featureTokens);\n  } else {\n    if (featureTokens[1].type === '<ident-token>' && featureTokens[1].value === 'not') {\n      child = tokenizeMediaCondition(featureTokens.slice(2, -1), true, 'not');\n    } else {\n      child = tokenizeMediaCondition(featureTokens.slice(1, -1), true);\n    }\n  }\n  if (endIndexOfFirstFeature === tokens.length - 1) {\n    return {\n      operator: previousOperator,\n      children: [child]\n    };\n  } else {\n    var nextToken = tokens[endIndexOfFirstFeature + 1];\n    if (nextToken.type !== '<ident-token>') {\n      throw new Error('Invalid operator\\nInvalid media condition');\n    } else if (previousOperator !== null && previousOperator !== nextToken.value) {\n      throw new Error(\"'\".concat(nextToken.value, \"' and '\").concat(previousOperator, \"' must not be at same level\\nInvalid media condition\"));\n    } else if (nextToken.value === 'or' && !mayContainOr) {\n      throw new Error(\"Cannot use 'or' at top level of a media query\\nInvalid media condition\");\n    } else if (nextToken.value !== 'and' && nextToken.value !== 'or') {\n      throw new Error(\"Invalid operator: '\".concat(nextToken.value, \"'\\nInvalid media condition\"));\n    }\n    var siblings = tokenizeMediaCondition(tokens.slice(endIndexOfFirstFeature + 2), mayContainOr, nextToken.value);\n    return {\n      operator: nextToken.value,\n      children: [child].concat(siblings.children)\n    };\n  }\n};\nvar tokenizeMediaFeature = function tokenizeMediaFeature(rawTokens) {\n  if (rawTokens.length < 3 || rawTokens[0].type !== '<(-token>' || rawTokens[rawTokens.length - 1].type !== '<)-token>') {\n    throw new Error('Invalid media feature');\n  }\n  var tokens = [rawTokens[0]];\n  for (var i = 1; i < rawTokens.length; i++) {\n    if (i < rawTokens.length - 2) {\n      var a = rawTokens[i];\n      var b = rawTokens[i + 1];\n      var c = rawTokens[i + 2];\n      if (a.type === '<number-token>' && a.value > 0 && b.type === '<delim-token>' && b.value === 0x002f && c.type === '<number-token>' && c.value > 0) {\n        tokens.push({\n          type: '<ratio-token>',\n          numerator: a.value,\n          denominator: c.value,\n          wsBefore: a.wsBefore,\n          wsAfter: c.wsAfter\n        });\n        i += 2;\n        continue;\n      }\n    }\n    tokens.push(rawTokens[i]);\n  }\n  var nextToken = tokens[1];\n  if (nextToken.type === '<ident-token>' && tokens.length === 3) {\n    return {\n      context: 'boolean',\n      feature: nextToken.value\n    };\n  } else if (tokens.length === 5 && tokens[1].type === '<ident-token>' && tokens[2].type === '<colon-token>') {\n    var valueToken = tokens[3];\n    if (valueToken.type === '<number-token>' || valueToken.type === '<dimension-token>' || valueToken.type === '<ratio-token>' || valueToken.type === '<ident-token>') {\n      var feature = tokens[1].value;\n      var prefix = null;\n      var slice = feature.slice(0, 4);\n      if (slice === 'min-') {\n        prefix = 'min';\n        feature = feature.slice(4);\n      } else if (slice === 'max-') {\n        prefix = 'max';\n        feature = feature.slice(4);\n      }\n      valueToken.wsBefore;\n      valueToken.wsAfter;\n      var value = __rest(valueToken, [\"wsBefore\", \"wsAfter\"]);\n      return {\n        context: 'value',\n        prefix: prefix,\n        feature: feature,\n        value: value\n      };\n    }\n  } else if (tokens.length >= 5) {\n    try {\n      var range = tokenizeRange(tokens);\n      return {\n        context: 'range',\n        feature: range.featureName,\n        range: range\n      };\n    } catch (err) {\n      throw createError('Invalid media feature', err);\n    }\n  }\n  throw new Error('Invalid media feature');\n};\nvar tokenizeRange = function tokenizeRange(tokens) {\n  var _a, _b, _c, _d;\n  if (tokens.length < 5 || tokens[0].type !== '<(-token>' || tokens[tokens.length - 1].type !== '<)-token>') {\n    throw new Error('Invalid range');\n  }\n  var range = {\n    leftToken: null,\n    leftOp: null,\n    featureName: '',\n    rightOp: null,\n    rightToken: null\n  };\n  var hasLeft = tokens[1].type === '<number-token>' || tokens[1].type === '<dimension-token>' || tokens[1].type === '<ratio-token>' || tokens[1].type === '<ident-token>' && tokens[1].value === 'infinite';\n  if (tokens[2].type === '<delim-token>') {\n    if (tokens[2].value === 0x003c) {\n      if (tokens[3].type === '<delim-token>' && tokens[3].value === 0x003d && !tokens[3].wsBefore) {\n        range[hasLeft ? 'leftOp' : 'rightOp'] = '<=';\n      } else {\n        range[hasLeft ? 'leftOp' : 'rightOp'] = '<';\n      }\n    } else if (tokens[2].value === 0x003e) {\n      if (tokens[3].type === '<delim-token>' && tokens[3].value === 0x003d && !tokens[3].wsBefore) {\n        range[hasLeft ? 'leftOp' : 'rightOp'] = '>=';\n      } else {\n        range[hasLeft ? 'leftOp' : 'rightOp'] = '>';\n      }\n    } else if (tokens[2].value === 0x003d) {\n      range[hasLeft ? 'leftOp' : 'rightOp'] = '=';\n    } else {\n      throw new Error('Invalid range');\n    }\n    if (hasLeft) {\n      range.leftToken = tokens[1];\n    } else if (tokens[1].type === '<ident-token>') {\n      range.featureName = tokens[1].value;\n    } else {\n      throw new Error('Invalid range');\n    }\n    var tokenIndexAfterFirstOp = 2 + ((_b = (_a = range[hasLeft ? 'leftOp' : 'rightOp']) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n    var tokenAfterFirstOp = tokens[tokenIndexAfterFirstOp];\n    if (hasLeft) {\n      if (tokenAfterFirstOp.type === '<ident-token>') {\n        range.featureName = tokenAfterFirstOp.value;\n        if (tokens.length >= 7) {\n          var secondOpToken = tokens[tokenIndexAfterFirstOp + 1];\n          var followingToken = tokens[tokenIndexAfterFirstOp + 2];\n          if (secondOpToken.type === '<delim-token>') {\n            var charCode = secondOpToken.value;\n            if (charCode === 0x003c) {\n              if (followingToken.type === '<delim-token>' && followingToken.value === 0x003d && !followingToken.wsBefore) {\n                range.rightOp = '<=';\n              } else {\n                range.rightOp = '<';\n              }\n            } else if (charCode === 0x003e) {\n              if (followingToken.type === '<delim-token>' && followingToken.value === 0x003d && !followingToken.wsBefore) {\n                range.rightOp = '>=';\n              } else {\n                range.rightOp = '>';\n              }\n            } else {\n              throw new Error('Invalid range');\n            }\n            var tokenAfterSecondOp = tokens[tokenIndexAfterFirstOp + 1 + ((_d = (_c = range.rightOp) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0)];\n            range.rightToken = tokenAfterSecondOp;\n          } else {\n            throw new Error('Invalid range');\n          }\n        } else if (tokenIndexAfterFirstOp + 2 !== tokens.length) {\n          throw new Error('Invalid range');\n        }\n      } else {\n        throw new Error('Invalid range');\n      }\n    } else {\n      range.rightToken = tokenAfterFirstOp;\n    }\n    var validRange = null;\n    var lt = range.leftToken,\n      leftOp = range.leftOp,\n      featureName = range.featureName,\n      rightOp = range.rightOp,\n      rt = range.rightToken;\n    var leftToken = null;\n    if (lt !== null) {\n      if (lt.type === '<ident-token>') {\n        var type = lt.type,\n          value = lt.value;\n        if (value === 'infinite') {\n          leftToken = {\n            type: type,\n            value: value\n          };\n        }\n      } else if (lt.type === '<number-token>' || lt.type === '<dimension-token>' || lt.type === '<ratio-token>') {\n        lt.wsBefore;\n        lt.wsAfter;\n        var ltNoWS = __rest(lt, [\"wsBefore\", \"wsAfter\"]);\n        leftToken = ltNoWS;\n      }\n    }\n    var rightToken = null;\n    if (rt !== null) {\n      if (rt.type === '<ident-token>') {\n        var type = rt.type,\n          value = rt.value;\n        if (value === 'infinite') {\n          rightToken = {\n            type: type,\n            value: value\n          };\n        }\n      } else if (rt.type === '<number-token>' || rt.type === '<dimension-token>' || rt.type === '<ratio-token>') {\n        rt.wsBefore;\n        rt.wsAfter;\n        var rtNoWS = __rest(rt, [\"wsBefore\", \"wsAfter\"]);\n        rightToken = rtNoWS;\n      }\n    }\n    if (leftToken !== null && rightToken !== null) {\n      if ((leftOp === '<' || leftOp === '<=') && (rightOp === '<' || rightOp === '<=')) {\n        validRange = {\n          leftToken: leftToken,\n          leftOp: leftOp,\n          featureName: featureName,\n          rightOp: rightOp,\n          rightToken: rightToken\n        };\n      } else if ((leftOp === '>' || leftOp === '>=') && (rightOp === '>' || rightOp === '>=')) {\n        validRange = {\n          leftToken: leftToken,\n          leftOp: leftOp,\n          featureName: featureName,\n          rightOp: rightOp,\n          rightToken: rightToken\n        };\n      } else {\n        throw new Error('Invalid range');\n      }\n    } else if (leftToken === null && leftOp === null && rightOp !== null && rightToken !== null) {\n      validRange = {\n        leftToken: leftToken,\n        leftOp: leftOp,\n        featureName: featureName,\n        rightOp: rightOp,\n        rightToken: rightToken\n      };\n    } else if (leftToken !== null && leftOp !== null && rightOp === null && rightToken === null) {\n      validRange = {\n        leftToken: leftToken,\n        leftOp: leftOp,\n        featureName: featureName,\n        rightOp: rightOp,\n        rightToken: rightToken\n      };\n    }\n    return validRange;\n  } else {\n    throw new Error('Invalid range');\n  }\n};\nexport { consumeEscape, consumeIdent, consumeIdentLike, consumeIdentUnsafe, consumeNumber, consumeNumeric, consumeString, consumeUrl, lexicalAnalysis, removeWhitespace, syntacticAnalysis, toAST, toUnflattenedAST, tokenizeMediaCondition, tokenizeMediaFeature, tokenizeMediaQuery, tokenizeRange, wouldStartIdentifier };","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","ar","push","error","weirdNewlines","nullOrSurrogates","commentRegex","lexicalAnalysis","str","index","replace","tokens","code","charCodeAt","code_1","type","result","consumeString","_a","lastIndex","nextCode","flag","wouldStartIdentifier","consumeIdentUnsafe","_b","toLowerCase","_c","plusNumeric","consumeNumeric","_d","tokenTuple","unit","minusNumeric","_e","nextNextCode","consumeIdentLike","_f","_g","nextNextNextCode","consumeIdent","_h","consumeEscape","_j","slice","_k","_l","firstCode","charCodes","String","fromCharCode","charCode","hexCharCodes","min","Math","code_2","code_3","parseInt","numberResult","consumeNumber","numberEndIndex","numberValue","numberFlag","identResult","identEndIndex","identValue","numberChars","nextNextIsDigit","numberString","parseFloat","Number","isNaN","identChars","code_4","code_5","consumeUrl","urlChars","hasFinishedWord","offset","result_1","lastUrlIndex","value_1","simplifyAST","ast","simplifyMediaQuery","mediaQuery","mediaCondition","simplifyMediaCondition","operator","children","mediaPrefix","mediaType","unsimplifiedChild","child","spliceArgs","i_1","splice","createError","message","err","Error","concat","trim","toAST","toUnflattenedAST","tokenList","startIndex","endIndex","token","syntacticAnalysis","removeWhitespace","newTokenList","before","wsAfter","wsBefore","mediaQueryList","mediaQueries","map","mediaQueryTokens","tokenizeMediaQuery","nonNullMediaQueryTokens","mediaQueryTokens_1","mediaQueryTokens_1_1","mediaQueryToken","firstToken","tokenizeMediaCondition","firstIndex","firstNonUnaryToken","tokensWithParens","secondNonUnaryToken","mayContainOr","previousOperator","endIndexOfFirstFeature","maxDepth","count","max","featureTokens","tokenizeMediaFeature","nextToken","siblings","rawTokens","a","b","c","numerator","denominator","context","feature","valueToken","prefix","range","tokenizeRange","featureName","leftToken","leftOp","rightOp","rightToken","hasLeft","tokenIndexAfterFirstOp","tokenAfterFirstOp","secondOpToken","followingToken","tokenAfterSecondOp","validRange","lt","rt","ltNoWS","rtNoWS"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\r\\sui-workshop\\node_modules\\media-query-parser\\node_modules\\tslib\\tslib.es6.js","C:\\Users\\hp\\OneDrive\\Desktop\\r\\sui-workshop\\node_modules\\media-query-parser\\compiled\\parse\\lexicalAnalysis.js","C:\\Users\\hp\\OneDrive\\Desktop\\r\\sui-workshop\\node_modules\\media-query-parser\\compiled\\parse\\simplifyAST.js","C:\\Users\\hp\\OneDrive\\Desktop\\r\\sui-workshop\\node_modules\\media-query-parser\\compiled\\parse\\syntacticAnalysis.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __read } from \"tslib\";\nvar weirdNewlines = /(\\u000D|\\u000C|\\u000D\\u000A)/g;\nvar nullOrSurrogates = /[\\u0000\\uD800-\\uDFFF]/g;\nvar commentRegex = /(\\/\\*)[\\s\\S]*?(\\*\\/)/g;\nexport var lexicalAnalysis = function (str, index) {\n    if (index === void 0) { index = 0; }\n    str = str.replace(weirdNewlines, '\\n').replace(nullOrSurrogates, '\\uFFFD');\n    str = str.replace(commentRegex, '');\n    var tokens = [];\n    for (; index < str.length; index += 1) {\n        var code = str.charCodeAt(index);\n        if (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n            var code_1 = str.charCodeAt(++index);\n            while (code_1 === 0x0009 || code_1 === 0x0020 || code_1 === 0x000a) {\n                code_1 = str.charCodeAt(++index);\n            }\n            index -= 1;\n            tokens.push({\n                type: '<whitespace-token>'\n            });\n        }\n        else if (code === 0x0022) {\n            var result = consumeString(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _a = __read(result, 2), lastIndex = _a[0], value = _a[1];\n            tokens.push({\n                type: '<string-token>',\n                value: value\n            });\n            index = lastIndex;\n        }\n        else if (code === 0x0023) {\n            if (index + 1 < str.length) {\n                var nextCode = str.charCodeAt(index + 1);\n                if (nextCode === 0x005f ||\n                    (nextCode >= 0x0041 && nextCode <= 0x005a) ||\n                    (nextCode >= 0x0061 && nextCode <= 0x007a) ||\n                    nextCode >= 0x0080 ||\n                    (nextCode >= 0x0030 && nextCode <= 0x0039) ||\n                    (nextCode === 0x005c &&\n                        index + 2 < str.length &&\n                        str.charCodeAt(index + 2) !== 0x000a)) {\n                    var flag = wouldStartIdentifier(str, index + 1)\n                        ? 'id'\n                        : 'unrestricted';\n                    var result = consumeIdentUnsafe(str, index + 1);\n                    if (result !== null) {\n                        var _b = __read(result, 2), lastIndex = _b[0], value = _b[1];\n                        tokens.push({\n                            type: '<hash-token>',\n                            value: value.toLowerCase(),\n                            flag: flag\n                        });\n                        index = lastIndex;\n                        continue;\n                    }\n                }\n            }\n            tokens.push({ type: '<delim-token>', value: code });\n        }\n        else if (code === 0x0027) {\n            var result = consumeString(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _c = __read(result, 2), lastIndex = _c[0], value = _c[1];\n            tokens.push({\n                type: '<string-token>',\n                value: value\n            });\n            index = lastIndex;\n        }\n        else if (code === 0x0028) {\n            tokens.push({ type: '<(-token>' });\n        }\n        else if (code === 0x0029) {\n            tokens.push({ type: '<)-token>' });\n        }\n        else if (code === 0x002b) {\n            var plusNumeric = consumeNumeric(str, index);\n            if (plusNumeric === null) {\n                tokens.push({\n                    type: '<delim-token>',\n                    value: code\n                });\n            }\n            else {\n                var _d = __read(plusNumeric, 2), lastIndex = _d[0], tokenTuple = _d[1];\n                if (tokenTuple[0] === '<dimension-token>') {\n                    tokens.push({\n                        type: '<dimension-token>',\n                        value: tokenTuple[1],\n                        unit: tokenTuple[2].toLowerCase(),\n                        flag: 'number'\n                    });\n                }\n                else if (tokenTuple[0] === '<number-token>') {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: tokenTuple[2]\n                    });\n                }\n                else {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: 'number'\n                    });\n                }\n                index = lastIndex;\n            }\n        }\n        else if (code === 0x002c) {\n            tokens.push({ type: '<comma-token>' });\n        }\n        else if (code === 0x002d) {\n            var minusNumeric = consumeNumeric(str, index);\n            if (minusNumeric !== null) {\n                var _e = __read(minusNumeric, 2), lastIndex = _e[0], tokenTuple = _e[1];\n                if (tokenTuple[0] === '<dimension-token>') {\n                    tokens.push({\n                        type: '<dimension-token>',\n                        value: tokenTuple[1],\n                        unit: tokenTuple[2].toLowerCase(),\n                        flag: 'number'\n                    });\n                }\n                else if (tokenTuple[0] === '<number-token>') {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: tokenTuple[2]\n                    });\n                }\n                else {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: 'number'\n                    });\n                }\n                index = lastIndex;\n                continue;\n            }\n            if (index + 2 < str.length) {\n                var nextCode = str.charCodeAt(index + 1);\n                var nextNextCode = str.charCodeAt(index + 2);\n                if (nextCode === 0x002d && nextNextCode === 0x003e) {\n                    tokens.push({\n                        type: '<CDC-token>'\n                    });\n                    index += 2;\n                    continue;\n                }\n            }\n            var result = consumeIdentLike(str, index);\n            if (result !== null) {\n                var _f = __read(result, 3), lastIndex = _f[0], value = _f[1], type = _f[2];\n                tokens.push({\n                    type: type,\n                    value: value\n                });\n                index = lastIndex;\n                continue;\n            }\n            tokens.push({\n                type: '<delim-token>',\n                value: code\n            });\n        }\n        else if (code === 0x002e) {\n            var minusNumeric = consumeNumeric(str, index);\n            if (minusNumeric === null) {\n                tokens.push({\n                    type: '<delim-token>',\n                    value: code\n                });\n            }\n            else {\n                var _g = __read(minusNumeric, 2), lastIndex = _g[0], tokenTuple = _g[1];\n                if (tokenTuple[0] === '<dimension-token>') {\n                    tokens.push({\n                        type: '<dimension-token>',\n                        value: tokenTuple[1],\n                        unit: tokenTuple[2].toLowerCase(),\n                        flag: 'number'\n                    });\n                }\n                else if (tokenTuple[0] === '<number-token>') {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: tokenTuple[2]\n                    });\n                }\n                else {\n                    tokens.push({\n                        type: tokenTuple[0],\n                        value: tokenTuple[1],\n                        flag: 'number'\n                    });\n                }\n                index = lastIndex;\n                continue;\n            }\n        }\n        else if (code === 0x003a) {\n            tokens.push({ type: '<colon-token>' });\n        }\n        else if (code === 0x003b) {\n            tokens.push({ type: '<semicolon-token>' });\n        }\n        else if (code === 0x003c) {\n            if (index + 3 < str.length) {\n                var nextCode = str.charCodeAt(index + 1);\n                var nextNextCode = str.charCodeAt(index + 2);\n                var nextNextNextCode = str.charCodeAt(index + 3);\n                if (nextCode === 0x0021 &&\n                    nextNextCode === 0x002d &&\n                    nextNextNextCode === 0x002d) {\n                    tokens.push({\n                        type: '<CDO-token>'\n                    });\n                    index += 3;\n                    continue;\n                }\n            }\n            tokens.push({\n                type: '<delim-token>',\n                value: code\n            });\n        }\n        else if (code === 0x0040) {\n            var result = consumeIdent(str, index + 1);\n            if (result !== null) {\n                var _h = __read(result, 2), lastIndex = _h[0], value = _h[1];\n                tokens.push({\n                    type: '<at-keyword-token>',\n                    value: value.toLowerCase()\n                });\n                index = lastIndex;\n                continue;\n            }\n            tokens.push({ type: '<delim-token>', value: code });\n        }\n        else if (code === 0x005b) {\n            tokens.push({ type: '<[-token>' });\n        }\n        else if (code === 0x005c) {\n            var result = consumeEscape(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _j = __read(result, 2), lastIndex = _j[0], value = _j[1];\n            str = str.slice(0, index) + value + str.slice(lastIndex + 1);\n            index -= 1;\n        }\n        else if (code === 0x005d) {\n            tokens.push({ type: '<]-token>' });\n        }\n        else if (code === 0x007b) {\n            tokens.push({ type: '<{-token>' });\n        }\n        else if (code === 0x007d) {\n            tokens.push({ type: '<}-token>' });\n        }\n        else if (code >= 0x0030 && code <= 0x0039) {\n            var result = consumeNumeric(str, index);\n            var _k = __read(result, 2), lastIndex = _k[0], tokenTuple = _k[1];\n            if (tokenTuple[0] === '<dimension-token>') {\n                tokens.push({\n                    type: '<dimension-token>',\n                    value: tokenTuple[1],\n                    unit: tokenTuple[2].toLowerCase(),\n                    flag: 'number'\n                });\n            }\n            else if (tokenTuple[0] === '<number-token>') {\n                tokens.push({\n                    type: tokenTuple[0],\n                    value: tokenTuple[1],\n                    flag: tokenTuple[2]\n                });\n            }\n            else {\n                tokens.push({\n                    type: tokenTuple[0],\n                    value: tokenTuple[1],\n                    flag: 'number'\n                });\n            }\n            index = lastIndex;\n        }\n        else if (code === 0x005f ||\n            (code >= 0x0041 && code <= 0x005a) ||\n            (code >= 0x0061 && code <= 0x007a) ||\n            code >= 0x0080) {\n            var result = consumeIdentLike(str, index);\n            if (result === null) {\n                return null;\n            }\n            var _l = __read(result, 3), lastIndex = _l[0], value = _l[1], type = _l[2];\n            tokens.push({\n                type: type,\n                value: value\n            });\n            index = lastIndex;\n        }\n        else {\n            tokens.push({ type: '<delim-token>', value: code });\n        }\n    }\n    tokens.push({ type: '<EOF-token>' });\n    return tokens;\n};\nexport var consumeString = function (str, index) {\n    if (str.length <= index + 1)\n        return null;\n    var firstCode = str.charCodeAt(index);\n    var charCodes = [];\n    for (var i = index + 1; i < str.length; i += 1) {\n        var code = str.charCodeAt(i);\n        if (code === firstCode) {\n            return [i, String.fromCharCode.apply(null, charCodes)];\n        }\n        else if (code === 0x005c) {\n            var result = consumeEscape(str, i);\n            if (result === null)\n                return null;\n            var _a = __read(result, 2), lastIndex = _a[0], charCode = _a[1];\n            charCodes.push(charCode);\n            i = lastIndex;\n        }\n        else if (code === 0x000a) {\n            return null;\n        }\n        else {\n            charCodes.push(code);\n        }\n    }\n    return null;\n};\nexport var wouldStartIdentifier = function (str, index) {\n    if (str.length <= index)\n        return false;\n    var code = str.charCodeAt(index);\n    if (code === 0x002d) {\n        if (str.length <= index + 1)\n            return false;\n        var nextCode = str.charCodeAt(index + 1);\n        if (nextCode === 0x002d ||\n            nextCode === 0x005f ||\n            (nextCode >= 0x0041 && nextCode <= 0x005a) ||\n            (nextCode >= 0x0061 && nextCode <= 0x007a) ||\n            nextCode >= 0x0080) {\n            return true;\n        }\n        else if (nextCode === 0x005c) {\n            if (str.length <= index + 2)\n                return false;\n            var nextNextCode = str.charCodeAt(index + 2);\n            return nextNextCode !== 0x000a;\n        }\n        else {\n            return false;\n        }\n    }\n    else if (code === 0x005f ||\n        (code >= 0x0041 && code <= 0x005a) ||\n        (code >= 0x0061 && code <= 0x007a) ||\n        code >= 0x0080) {\n        return true;\n    }\n    else if (code === 0x005c) {\n        if (str.length <= index + 1)\n            return false;\n        var nextCode = str.charCodeAt(index + 1);\n        return nextCode !== 0x000a;\n    }\n    else {\n        return false;\n    }\n};\nexport var consumeEscape = function (str, index) {\n    if (str.length <= index + 1)\n        return null;\n    if (str.charCodeAt(index) !== 0x005c)\n        return null;\n    var code = str.charCodeAt(index + 1);\n    if (code === 0x000a) {\n        return null;\n    }\n    else if ((code >= 0x0030 && code <= 0x0039) ||\n        (code >= 0x0041 && code <= 0x0046) ||\n        (code >= 0x0061 && code <= 0x0066)) {\n        var hexCharCodes = [code];\n        var min = Math.min(index + 7, str.length);\n        var i = index + 2;\n        for (; i < min; i += 1) {\n            var code_2 = str.charCodeAt(i);\n            if ((code_2 >= 0x0030 && code_2 <= 0x0039) ||\n                (code_2 >= 0x0041 && code_2 <= 0x0046) ||\n                (code_2 >= 0x0061 && code_2 <= 0x0066)) {\n                hexCharCodes.push(code_2);\n            }\n            else {\n                break;\n            }\n        }\n        if (i < str.length) {\n            var code_3 = str.charCodeAt(i);\n            if (code_3 === 0x0009 || code_3 === 0x0020 || code_3 === 0x000a) {\n                i += 1;\n            }\n        }\n        return [i - 1, parseInt(String.fromCharCode.apply(null, hexCharCodes), 16)];\n    }\n    else {\n        return [index + 1, code];\n    }\n};\nexport var consumeNumeric = function (str, index) {\n    var numberResult = consumeNumber(str, index);\n    if (numberResult === null)\n        return null;\n    var _a = __read(numberResult, 3), numberEndIndex = _a[0], numberValue = _a[1], numberFlag = _a[2];\n    var identResult = consumeIdent(str, numberEndIndex + 1);\n    if (identResult !== null) {\n        var _b = __read(identResult, 2), identEndIndex = _b[0], identValue = _b[1];\n        return [identEndIndex, ['<dimension-token>', numberValue, identValue]];\n    }\n    if (numberEndIndex + 1 < str.length &&\n        str.charCodeAt(numberEndIndex + 1) === 0x0025) {\n        return [numberEndIndex + 1, ['<percentage-token>', numberValue]];\n    }\n    return [numberEndIndex, ['<number-token>', numberValue, numberFlag]];\n};\nexport var consumeNumber = function (str, index) {\n    if (str.length <= index)\n        return null;\n    var flag = 'integer';\n    var numberChars = [];\n    var firstCode = str.charCodeAt(index);\n    if (firstCode === 0x002b || firstCode === 0x002d) {\n        index += 1;\n        if (firstCode === 0x002d)\n            numberChars.push(0x002d);\n    }\n    while (index < str.length) {\n        var code = str.charCodeAt(index);\n        if (code >= 0x0030 && code <= 0x0039) {\n            numberChars.push(code);\n            index += 1;\n        }\n        else {\n            break;\n        }\n    }\n    if (index + 1 < str.length) {\n        var nextCode = str.charCodeAt(index);\n        var nextNextCode = str.charCodeAt(index + 1);\n        if (nextCode === 0x002e &&\n            nextNextCode >= 0x0030 &&\n            nextNextCode <= 0x0039) {\n            numberChars.push(nextCode, nextNextCode);\n            flag = 'number';\n            index += 2;\n            while (index < str.length) {\n                var code = str.charCodeAt(index);\n                if (code >= 0x0030 && code <= 0x0039) {\n                    numberChars.push(code);\n                    index += 1;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n    }\n    if (index + 1 < str.length) {\n        var nextCode = str.charCodeAt(index);\n        var nextNextCode = str.charCodeAt(index + 1);\n        var nextNextNextCode = str.charCodeAt(index + 2);\n        if (nextCode === 0x0045 || nextCode === 0x0065) {\n            var nextNextIsDigit = nextNextCode >= 0x0030 && nextNextCode <= 0x0039;\n            if (nextNextIsDigit ||\n                ((nextNextCode === 0x002b || nextNextCode === 0x002d) &&\n                    nextNextNextCode >= 0x0030 &&\n                    nextNextNextCode <= 0x0039)) {\n                flag = 'number';\n                if (nextNextIsDigit) {\n                    numberChars.push(0x0045, nextNextCode);\n                    index += 2;\n                }\n                else if (nextNextCode === 0x002d) {\n                    numberChars.push(0x0045, 0x002d, nextNextNextCode);\n                    index += 3;\n                }\n                else {\n                    numberChars.push(0x0045, nextNextNextCode);\n                    index += 3;\n                }\n                while (index < str.length) {\n                    var code = str.charCodeAt(index);\n                    if (code >= 0x0030 && code <= 0x0039) {\n                        numberChars.push(code);\n                        index += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    var numberString = String.fromCharCode.apply(null, numberChars);\n    var value = flag === 'number' ? parseFloat(numberString) : parseInt(numberString);\n    if (value === -0)\n        value = 0;\n    return Number.isNaN(value) ? null : [index - 1, value, flag];\n};\nexport var consumeIdentUnsafe = function (str, index) {\n    if (str.length <= index) {\n        return null;\n    }\n    var identChars = [];\n    for (var code = str.charCodeAt(index); index < str.length; code = str.charCodeAt(++index)) {\n        if (code === 0x002d ||\n            code === 0x005f ||\n            (code >= 0x0041 && code <= 0x005a) ||\n            (code >= 0x0061 && code <= 0x007a) ||\n            code >= 0x0080 ||\n            (code >= 0x0030 && code <= 0x0039)) {\n            identChars.push(code);\n            continue;\n        }\n        else {\n            var result = consumeEscape(str, index);\n            if (result !== null) {\n                var _a = __read(result, 2), lastIndex = _a[0], code_4 = _a[1];\n                identChars.push(code_4);\n                index = lastIndex;\n                continue;\n            }\n        }\n        break;\n    }\n    return index === 0\n        ? null\n        : [index - 1, String.fromCharCode.apply(null, identChars)];\n};\nexport var consumeIdent = function (str, index) {\n    if (str.length <= index || !wouldStartIdentifier(str, index)) {\n        return null;\n    }\n    var identChars = [];\n    for (var code = str.charCodeAt(index); index < str.length; code = str.charCodeAt(++index)) {\n        if (code === 0x002d ||\n            code === 0x005f ||\n            (code >= 0x0041 && code <= 0x005a) ||\n            (code >= 0x0061 && code <= 0x007a) ||\n            code >= 0x0080 ||\n            (code >= 0x0030 && code <= 0x0039)) {\n            identChars.push(code);\n            continue;\n        }\n        else {\n            var result = consumeEscape(str, index);\n            if (result !== null) {\n                var _a = __read(result, 2), lastIndex = _a[0], code_5 = _a[1];\n                identChars.push(code_5);\n                index = lastIndex;\n                continue;\n            }\n        }\n        break;\n    }\n    return [index - 1, String.fromCharCode.apply(null, identChars)];\n};\nexport var consumeUrl = function (str, index) {\n    var code = str.charCodeAt(index);\n    while (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n        code = str.charCodeAt(++index);\n    }\n    var urlChars = [];\n    var hasFinishedWord = false;\n    while (index < str.length) {\n        if (code === 0x0029) {\n            return [index, String.fromCharCode.apply(null, urlChars)];\n        }\n        else if (code === 0x0022 || code === 0x0027 || code === 0x0028) {\n            return null;\n        }\n        else if (code === 0x0009 || code === 0x0020 || code === 0x000a) {\n            if (!hasFinishedWord && urlChars.length !== 0)\n                hasFinishedWord = true;\n        }\n        else if (code === 0x005c) {\n            var result = consumeEscape(str, index);\n            if (result === null || hasFinishedWord)\n                return null;\n            var _a = __read(result, 2), lastIndex = _a[0], value = _a[1];\n            urlChars.push(value);\n            index = lastIndex;\n        }\n        else {\n            if (hasFinishedWord)\n                return null;\n            urlChars.push(code);\n        }\n        code = str.charCodeAt(++index);\n    }\n    return null;\n};\nexport var consumeIdentLike = function (str, index) {\n    var result = consumeIdent(str, index);\n    if (result === null)\n        return null;\n    var _a = __read(result, 2), lastIndex = _a[0], value = _a[1];\n    if (value.toLowerCase() === 'url') {\n        if (str.length > lastIndex + 1) {\n            var nextCode = str.charCodeAt(lastIndex + 1);\n            if (nextCode === 0x0028) {\n                for (var offset = 2; lastIndex + offset < str.length; offset += 1) {\n                    var nextNextCode = str.charCodeAt(lastIndex + offset);\n                    if (nextNextCode === 0x0022 || nextNextCode === 0x0027) {\n                        return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n                    }\n                    else if (nextNextCode !== 0x0009 &&\n                        nextNextCode !== 0x0020 &&\n                        nextNextCode !== 0x000a) {\n                        var result_1 = consumeUrl(str, lastIndex + offset);\n                        if (result_1 === null)\n                            return null;\n                        var _b = __read(result_1, 2), lastUrlIndex = _b[0], value_1 = _b[1];\n                        return [lastUrlIndex, value_1, '<url-token>'];\n                    }\n                }\n                return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n            }\n        }\n    }\n    else if (str.length > lastIndex + 1) {\n        var nextCode = str.charCodeAt(lastIndex + 1);\n        if (nextCode === 0x0028) {\n            return [lastIndex + 1, value.toLowerCase(), '<function-token>'];\n        }\n    }\n    return [lastIndex, value.toLowerCase(), '<ident-token>'];\n};\n//# sourceMappingURL=lexicalAnalysis.js.map","export var simplifyAST = function (ast) {\n    for (var i = ast.length - 1; i >= 0; i--) {\n        ast[i] = simplifyMediaQuery(ast[i]);\n    }\n    return ast;\n};\nvar simplifyMediaQuery = function (mediaQuery) {\n    if (mediaQuery.mediaCondition === null)\n        return mediaQuery;\n    var mediaCondition = simplifyMediaCondition(mediaQuery.mediaCondition);\n    if (mediaCondition.operator === null &&\n        mediaCondition.children.length === 1 &&\n        'children' in mediaCondition.children[0]) {\n        mediaCondition = mediaCondition.children[0];\n    }\n    return {\n        mediaPrefix: mediaQuery.mediaPrefix,\n        mediaType: mediaQuery.mediaType,\n        mediaCondition: mediaCondition\n    };\n};\nvar simplifyMediaCondition = function (mediaCondition) {\n    for (var i = mediaCondition.children.length - 1; i >= 0; i--) {\n        var unsimplifiedChild = mediaCondition.children[i];\n        if (!('context' in unsimplifiedChild)) {\n            var child = simplifyMediaCondition(unsimplifiedChild);\n            if (child.operator === null && child.children.length === 1) {\n                mediaCondition.children[i] = child.children[0];\n            }\n            else if (child.operator === mediaCondition.operator &&\n                (child.operator === 'and' || child.operator === 'or')) {\n                var spliceArgs = [i, 1];\n                for (var i_1 = 0; i_1 < child.children.length; i_1++) {\n                    spliceArgs.push(child.children[i_1]);\n                }\n                mediaCondition.children.splice.apply(mediaCondition.children, spliceArgs);\n            }\n        }\n    }\n    return mediaCondition;\n};\n//# sourceMappingURL=simplifyAST.js.map","import { __assign, __rest, __values } from \"tslib\";\nimport { lexicalAnalysis } from './lexicalAnalysis';\nimport { simplifyAST } from './simplifyAST';\nvar createError = function (message, err) {\n    if (err instanceof Error) {\n        return new Error(\"\".concat(err.message.trim(), \"\\n\").concat(message.trim()));\n    }\n    else {\n        return new Error(message.trim());\n    }\n};\nexport var toAST = function (str) {\n    return simplifyAST(toUnflattenedAST(str));\n};\nexport var toUnflattenedAST = function (str) {\n    var tokenList = lexicalAnalysis(str.trim());\n    if (tokenList === null) {\n        throw createError('Failed tokenizing');\n    }\n    var startIndex = 0;\n    var endIndex = tokenList.length - 1;\n    if (tokenList[0].type === '<at-keyword-token>' &&\n        tokenList[0].value === 'media') {\n        if (tokenList[1].type !== '<whitespace-token>') {\n            throw createError('Expected whitespace after media');\n        }\n        startIndex = 2;\n        for (var i = 2; i < tokenList.length - 1; i++) {\n            var token = tokenList[i];\n            if (token.type === '<{-token>') {\n                endIndex = i;\n                break;\n            }\n            else if (token.type === '<semicolon-token>') {\n                throw createError(\"Expected '{' in media query but found ';'\");\n            }\n        }\n    }\n    tokenList = tokenList.slice(startIndex, endIndex);\n    return syntacticAnalysis(tokenList);\n};\nexport var removeWhitespace = function (tokenList) {\n    var newTokenList = [];\n    var before = false;\n    for (var i = 0; i < tokenList.length; i++) {\n        if (tokenList[i].type === '<whitespace-token>') {\n            before = true;\n            if (newTokenList.length > 0) {\n                newTokenList[newTokenList.length - 1].wsAfter = true;\n            }\n        }\n        else {\n            newTokenList.push(__assign(__assign({}, tokenList[i]), { wsBefore: before, wsAfter: false }));\n            before = false;\n        }\n    }\n    return newTokenList;\n};\nexport var syntacticAnalysis = function (tokenList) {\n    var e_1, _a;\n    var mediaQueryList = [[]];\n    for (var i = 0; i < tokenList.length; i++) {\n        var token = tokenList[i];\n        if (token.type === '<comma-token>') {\n            mediaQueryList.push([]);\n        }\n        else {\n            mediaQueryList[mediaQueryList.length - 1].push(token);\n        }\n    }\n    var mediaQueries = mediaQueryList.map(removeWhitespace);\n    if (mediaQueries.length === 1 && mediaQueries[0].length === 0) {\n        return [{ mediaCondition: null, mediaPrefix: null, mediaType: 'all' }];\n    }\n    else {\n        var mediaQueryTokens = mediaQueries.map(function (mediaQueryTokens) {\n            if (mediaQueryTokens.length === 0) {\n                return null;\n            }\n            else {\n                return tokenizeMediaQuery(mediaQueryTokens);\n            }\n        });\n        var nonNullMediaQueryTokens = [];\n        try {\n            for (var mediaQueryTokens_1 = __values(mediaQueryTokens), mediaQueryTokens_1_1 = mediaQueryTokens_1.next(); !mediaQueryTokens_1_1.done; mediaQueryTokens_1_1 = mediaQueryTokens_1.next()) {\n                var mediaQueryToken = mediaQueryTokens_1_1.value;\n                if (mediaQueryToken !== null) {\n                    nonNullMediaQueryTokens.push(mediaQueryToken);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (mediaQueryTokens_1_1 && !mediaQueryTokens_1_1.done && (_a = mediaQueryTokens_1.return)) _a.call(mediaQueryTokens_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (nonNullMediaQueryTokens.length === 0) {\n            throw createError('No valid media queries');\n        }\n        return nonNullMediaQueryTokens;\n    }\n};\nexport var tokenizeMediaQuery = function (tokens) {\n    var firstToken = tokens[0];\n    if (firstToken.type === '<(-token>') {\n        try {\n            return {\n                mediaPrefix: null,\n                mediaType: 'all',\n                mediaCondition: tokenizeMediaCondition(tokens, true)\n            };\n        }\n        catch (err) {\n            throw createError(\"Expected media condition after '('\", err);\n        }\n    }\n    else if (firstToken.type === '<ident-token>') {\n        var mediaPrefix = null;\n        var mediaType = void 0;\n        var value = firstToken.value;\n        if (value === 'only' || value === 'not') {\n            mediaPrefix = value;\n        }\n        var firstIndex = mediaPrefix === null ? 0 : 1;\n        if (tokens.length <= firstIndex) {\n            throw createError(\"Expected extra token in media query\");\n        }\n        var firstNonUnaryToken = tokens[firstIndex];\n        if (firstNonUnaryToken.type === '<ident-token>') {\n            var value_1 = firstNonUnaryToken.value;\n            if (value_1 === 'all') {\n                mediaType = 'all';\n            }\n            else if (value_1 === 'print' || value_1 === 'screen') {\n                mediaType = value_1;\n            }\n            else if (value_1 === 'tty' ||\n                value_1 === 'tv' ||\n                value_1 === 'projection' ||\n                value_1 === 'handheld' ||\n                value_1 === 'braille' ||\n                value_1 === 'embossed' ||\n                value_1 === 'aural' ||\n                value_1 === 'speech') {\n                mediaPrefix = mediaPrefix === 'not' ? null : 'not';\n                mediaType = 'all';\n            }\n            else {\n                throw createError(\"Unknown ident '\".concat(value_1, \"' in media query\"));\n            }\n        }\n        else if (mediaPrefix === 'not' &&\n            firstNonUnaryToken.type === '<(-token>') {\n            var tokensWithParens = [\n                { type: '<(-token>', wsBefore: false, wsAfter: false }\n            ];\n            tokensWithParens.push.apply(tokensWithParens, tokens);\n            tokensWithParens.push({\n                type: '<)-token>',\n                wsBefore: false,\n                wsAfter: false\n            });\n            try {\n                return {\n                    mediaPrefix: null,\n                    mediaType: 'all',\n                    mediaCondition: tokenizeMediaCondition(tokensWithParens, true)\n                };\n            }\n            catch (err) {\n                throw createError(\"Expected media condition after '('\", err);\n            }\n        }\n        else {\n            throw createError('Invalid media query');\n        }\n        if (firstIndex + 1 === tokens.length) {\n            return {\n                mediaPrefix: mediaPrefix,\n                mediaType: mediaType,\n                mediaCondition: null\n            };\n        }\n        else if (firstIndex + 4 < tokens.length) {\n            var secondNonUnaryToken = tokens[firstIndex + 1];\n            if (secondNonUnaryToken.type === '<ident-token>' &&\n                secondNonUnaryToken.value === 'and') {\n                try {\n                    return {\n                        mediaPrefix: mediaPrefix,\n                        mediaType: mediaType,\n                        mediaCondition: tokenizeMediaCondition(tokens.slice(firstIndex + 2), false)\n                    };\n                }\n                catch (err) {\n                    throw createError(\"Expected media condition after 'and'\", err);\n                }\n            }\n            else {\n                throw createError(\"Expected 'and' after media prefix\");\n            }\n        }\n        else {\n            throw createError('Expected media condition after media prefix');\n        }\n    }\n    else {\n        throw createError('Expected media condition or media prefix');\n    }\n};\nexport var tokenizeMediaCondition = function (tokens, mayContainOr, previousOperator) {\n    if (previousOperator === void 0) { previousOperator = null; }\n    if (tokens.length < 3 ||\n        tokens[0].type !== '<(-token>' ||\n        tokens[tokens.length - 1].type !== '<)-token>') {\n        throw new Error('Invalid media condition');\n    }\n    var endIndexOfFirstFeature = tokens.length - 1;\n    var maxDepth = 0;\n    var count = 0;\n    for (var i = 0; i < tokens.length; i++) {\n        var token = tokens[i];\n        if (token.type === '<(-token>') {\n            count += 1;\n            maxDepth = Math.max(maxDepth, count);\n        }\n        else if (token.type === '<)-token>') {\n            count -= 1;\n        }\n        if (count === 0) {\n            endIndexOfFirstFeature = i;\n            break;\n        }\n    }\n    if (count !== 0) {\n        throw new Error('Mismatched parens\\nInvalid media condition');\n    }\n    var child;\n    var featureTokens = tokens.slice(0, endIndexOfFirstFeature + 1);\n    if (maxDepth === 1) {\n        child = tokenizeMediaFeature(featureTokens);\n    }\n    else {\n        if (featureTokens[1].type === '<ident-token>' &&\n            featureTokens[1].value === 'not') {\n            child = tokenizeMediaCondition(featureTokens.slice(2, -1), true, 'not');\n        }\n        else {\n            child = tokenizeMediaCondition(featureTokens.slice(1, -1), true);\n        }\n    }\n    if (endIndexOfFirstFeature === tokens.length - 1) {\n        return {\n            operator: previousOperator,\n            children: [child]\n        };\n    }\n    else {\n        var nextToken = tokens[endIndexOfFirstFeature + 1];\n        if (nextToken.type !== '<ident-token>') {\n            throw new Error('Invalid operator\\nInvalid media condition');\n        }\n        else if (previousOperator !== null &&\n            previousOperator !== nextToken.value) {\n            throw new Error(\"'\".concat(nextToken.value, \"' and '\").concat(previousOperator, \"' must not be at same level\\nInvalid media condition\"));\n        }\n        else if (nextToken.value === 'or' && !mayContainOr) {\n            throw new Error(\"Cannot use 'or' at top level of a media query\\nInvalid media condition\");\n        }\n        else if (nextToken.value !== 'and' && nextToken.value !== 'or') {\n            throw new Error(\"Invalid operator: '\".concat(nextToken.value, \"'\\nInvalid media condition\"));\n        }\n        var siblings = tokenizeMediaCondition(tokens.slice(endIndexOfFirstFeature + 2), mayContainOr, nextToken.value);\n        return {\n            operator: nextToken.value,\n            children: [child].concat(siblings.children)\n        };\n    }\n};\nexport var tokenizeMediaFeature = function (rawTokens) {\n    if (rawTokens.length < 3 ||\n        rawTokens[0].type !== '<(-token>' ||\n        rawTokens[rawTokens.length - 1].type !== '<)-token>') {\n        throw new Error('Invalid media feature');\n    }\n    var tokens = [rawTokens[0]];\n    for (var i = 1; i < rawTokens.length; i++) {\n        if (i < rawTokens.length - 2) {\n            var a = rawTokens[i];\n            var b = rawTokens[i + 1];\n            var c = rawTokens[i + 2];\n            if (a.type === '<number-token>' &&\n                a.value > 0 &&\n                b.type === '<delim-token>' &&\n                b.value === 0x002f &&\n                c.type === '<number-token>' &&\n                c.value > 0) {\n                tokens.push({\n                    type: '<ratio-token>',\n                    numerator: a.value,\n                    denominator: c.value,\n                    wsBefore: a.wsBefore,\n                    wsAfter: c.wsAfter\n                });\n                i += 2;\n                continue;\n            }\n        }\n        tokens.push(rawTokens[i]);\n    }\n    var nextToken = tokens[1];\n    if (nextToken.type === '<ident-token>' && tokens.length === 3) {\n        return {\n            context: 'boolean',\n            feature: nextToken.value\n        };\n    }\n    else if (tokens.length === 5 &&\n        tokens[1].type === '<ident-token>' &&\n        tokens[2].type === '<colon-token>') {\n        var valueToken = tokens[3];\n        if (valueToken.type === '<number-token>' ||\n            valueToken.type === '<dimension-token>' ||\n            valueToken.type === '<ratio-token>' ||\n            valueToken.type === '<ident-token>') {\n            var feature = tokens[1].value;\n            var prefix = null;\n            var slice = feature.slice(0, 4);\n            if (slice === 'min-') {\n                prefix = 'min';\n                feature = feature.slice(4);\n            }\n            else if (slice === 'max-') {\n                prefix = 'max';\n                feature = feature.slice(4);\n            }\n            var _0 = valueToken.wsBefore, _1 = valueToken.wsAfter, value = __rest(valueToken, [\"wsBefore\", \"wsAfter\"]);\n            return {\n                context: 'value',\n                prefix: prefix,\n                feature: feature,\n                value: value\n            };\n        }\n    }\n    else if (tokens.length >= 5) {\n        try {\n            var range = tokenizeRange(tokens);\n            return {\n                context: 'range',\n                feature: range.featureName,\n                range: range\n            };\n        }\n        catch (err) {\n            throw createError('Invalid media feature', err);\n        }\n    }\n    throw new Error('Invalid media feature');\n};\nexport var tokenizeRange = function (tokens) {\n    var _a, _b, _c, _d;\n    if (tokens.length < 5 ||\n        tokens[0].type !== '<(-token>' ||\n        tokens[tokens.length - 1].type !== '<)-token>') {\n        throw new Error('Invalid range');\n    }\n    var range = {\n        leftToken: null,\n        leftOp: null,\n        featureName: '',\n        rightOp: null,\n        rightToken: null\n    };\n    var hasLeft = tokens[1].type === '<number-token>' ||\n        tokens[1].type === '<dimension-token>' ||\n        tokens[1].type === '<ratio-token>' ||\n        (tokens[1].type === '<ident-token>' && tokens[1].value === 'infinite');\n    if (tokens[2].type === '<delim-token>') {\n        if (tokens[2].value === 0x003c) {\n            if (tokens[3].type === '<delim-token>' &&\n                tokens[3].value === 0x003d &&\n                !tokens[3].wsBefore) {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '<=';\n            }\n            else {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '<';\n            }\n        }\n        else if (tokens[2].value === 0x003e) {\n            if (tokens[3].type === '<delim-token>' &&\n                tokens[3].value === 0x003d &&\n                !tokens[3].wsBefore) {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '>=';\n            }\n            else {\n                range[hasLeft ? 'leftOp' : 'rightOp'] = '>';\n            }\n        }\n        else if (tokens[2].value === 0x003d) {\n            range[hasLeft ? 'leftOp' : 'rightOp'] = '=';\n        }\n        else {\n            throw new Error('Invalid range');\n        }\n        if (hasLeft) {\n            range.leftToken = tokens[1];\n        }\n        else if (tokens[1].type === '<ident-token>') {\n            range.featureName = tokens[1].value;\n        }\n        else {\n            throw new Error('Invalid range');\n        }\n        var tokenIndexAfterFirstOp = 2 + ((_b = (_a = range[hasLeft ? 'leftOp' : 'rightOp']) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n        var tokenAfterFirstOp = tokens[tokenIndexAfterFirstOp];\n        if (hasLeft) {\n            if (tokenAfterFirstOp.type === '<ident-token>') {\n                range.featureName = tokenAfterFirstOp.value;\n                if (tokens.length >= 7) {\n                    var secondOpToken = tokens[tokenIndexAfterFirstOp + 1];\n                    var followingToken = tokens[tokenIndexAfterFirstOp + 2];\n                    if (secondOpToken.type === '<delim-token>') {\n                        var charCode = secondOpToken.value;\n                        if (charCode === 0x003c) {\n                            if (followingToken.type === '<delim-token>' &&\n                                followingToken.value === 0x003d &&\n                                !followingToken.wsBefore) {\n                                range.rightOp = '<=';\n                            }\n                            else {\n                                range.rightOp = '<';\n                            }\n                        }\n                        else if (charCode === 0x003e) {\n                            if (followingToken.type === '<delim-token>' &&\n                                followingToken.value === 0x003d &&\n                                !followingToken.wsBefore) {\n                                range.rightOp = '>=';\n                            }\n                            else {\n                                range.rightOp = '>';\n                            }\n                        }\n                        else {\n                            throw new Error('Invalid range');\n                        }\n                        var tokenAfterSecondOp = tokens[tokenIndexAfterFirstOp + 1 + ((_d = (_c = range.rightOp) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0)];\n                        range.rightToken = tokenAfterSecondOp;\n                    }\n                    else {\n                        throw new Error('Invalid range');\n                    }\n                }\n                else if (tokenIndexAfterFirstOp + 2 !== tokens.length) {\n                    throw new Error('Invalid range');\n                }\n            }\n            else {\n                throw new Error('Invalid range');\n            }\n        }\n        else {\n            range.rightToken = tokenAfterFirstOp;\n        }\n        var validRange = null;\n        var lt = range.leftToken, leftOp = range.leftOp, featureName = range.featureName, rightOp = range.rightOp, rt = range.rightToken;\n        var leftToken = null;\n        if (lt !== null) {\n            if (lt.type === '<ident-token>') {\n                var type = lt.type, value = lt.value;\n                if (value === 'infinite') {\n                    leftToken = { type: type, value: value };\n                }\n            }\n            else if (lt.type === '<number-token>' ||\n                lt.type === '<dimension-token>' ||\n                lt.type === '<ratio-token>') {\n                var _0 = lt.wsBefore, _1 = lt.wsAfter, ltNoWS = __rest(lt, [\"wsBefore\", \"wsAfter\"]);\n                leftToken = ltNoWS;\n            }\n        }\n        var rightToken = null;\n        if (rt !== null) {\n            if (rt.type === '<ident-token>') {\n                var type = rt.type, value = rt.value;\n                if (value === 'infinite') {\n                    rightToken = { type: type, value: value };\n                }\n            }\n            else if (rt.type === '<number-token>' ||\n                rt.type === '<dimension-token>' ||\n                rt.type === '<ratio-token>') {\n                var _0 = rt.wsBefore, _1 = rt.wsAfter, rtNoWS = __rest(rt, [\"wsBefore\", \"wsAfter\"]);\n                rightToken = rtNoWS;\n            }\n        }\n        if (leftToken !== null && rightToken !== null) {\n            if ((leftOp === '<' || leftOp === '<=') &&\n                (rightOp === '<' || rightOp === '<=')) {\n                validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n            }\n            else if ((leftOp === '>' || leftOp === '>=') &&\n                (rightOp === '>' || rightOp === '>=')) {\n                validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n            }\n            else {\n                throw new Error('Invalid range');\n            }\n        }\n        else if (leftToken === null &&\n            leftOp === null &&\n            rightOp !== null &&\n            rightToken !== null) {\n            validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n        }\n        else if (leftToken !== null &&\n            leftOp !== null &&\n            rightOp === null &&\n            rightToken === null) {\n            validRange = { leftToken: leftToken, leftOp: leftOp, featureName: featureName, rightOp: rightOp, rightToken: rightToken };\n        }\n        return validRange;\n    }\n    else {\n        throw new Error('Invalid range');\n    }\n};\n//# sourceMappingURL=syntacticAnalysis.js.map"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}